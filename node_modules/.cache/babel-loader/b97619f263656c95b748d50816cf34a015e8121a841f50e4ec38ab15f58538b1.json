{"ast":null,"code":"import Vue from 'vue';\nimport VueRouter from 'vue-router';\nVue.use(VueRouter);\n//路由跳转配置\nconst routes = [{\n  path: '/',\n  name: 'loginView',\n  component: () => import('../views/login.vue')\n}, {\n  path: '/home',\n  name: 'homeView',\n  component: () => import('../views/home.vue'),\n  children: [\n  // ***\n  {\n    path: '/billStyle',\n    // 修改路径为 /bill\n    name: 'billStyle',\n    component: () => import('../views/billStyle.vue')\n  }, {\n    path: '/customer',\n    // 修改路径为 /customer\n    name: 'customerView',\n    component: () => import('../views/customer.vue')\n  },\n  // ***\n  {\n    path: '/roles',\n    name: 'rolesView',\n    component: () => import('../views/roles.vue')\n  }, {\n    path: '/category',\n    name: 'categoryView',\n    component: () => import('../views/category.vue')\n  },\n  // {\n  //   path: '/billTypes',\n  //   name: 'billTypesView',\n  //   component: () => import('../views/billTypes.vue')\n  // },\n  // {\n  //   path: '/customers',\n  //   name: 'customersView',\n  //   component: () => import('../views/customers.vue')\n  // },\n  {\n    path: '/search',\n    name: 'searchView',\n    component: () => import('../views/search.vue')\n  }, {\n    path: '/create',\n    name: 'editView',\n    component: () => import('../views/edit.vue')\n  }, {\n    path: '/edit/:billno',\n    name: 'editView',\n    component: () => import('../views/edit.vue')\n  }]\n}];\nconst router = new VueRouter({\n  routes\n});\n// 路由守卫\nrouter.beforeEach((to, from, next) => {\n  const rolesno = sessionStorage.getItem('rolesno');\n  const isValidPath = /^[a-zA-Z0-9/]*$/.test(to.path);\n  if (!isValidPath) {\n    // 如果路径不合法，重定向到默认页面\n    next('/');\n    return;\n  }\n  if (to.path === '/') {\n    next();\n  } else {\n    if (rolesno == null) {\n      next('/');\n    } else {\n      next();\n    }\n  }\n  switch (rolesno) {\n    case '1':\n      if (to.path == '/roles') {\n        next('/search');\n      } else if (to.path == '/category') {\n        next('/search');\n      }\n      break;\n    case '2':\n      if (to.path == '/roles') {\n        next('/search');\n      } else if (to.path == '/category') {\n        next('/search');\n      } else if (to.path == '/edit') {\n        next('/search');\n      } else if (to.path == '/create') {\n        next('/search');\n      }\n      break;\n    case '3':\n      if (to.path == '/roles') {\n        next('/search');\n      } else if (to.path == '/category') {\n        next('/search');\n      } else if (to.path == '/edit') {\n        next('/search');\n      } else if (to.path == '/create') {\n        next('/search');\n      }\n      break;\n    case '4':\n      break;\n    default:\n      if (to.path === '/') {\n        next();\n      } else {\n        next('/');\n      }\n      break;\n  }\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","use","routes","path","name","component","children","router","beforeEach","to","from","next","rolesno","sessionStorage","getItem","isValidPath","test"],"sources":["/Users/mucc/Documents/GitHub/ebill/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\n\nVue.use(VueRouter)\n//路由跳转配置\nconst routes = [\n  {\n    path: '/',\n    name: 'loginView',\n    component: () => import('../views/login.vue')\n  },\n  {\n    path: '/home',\n    name: 'homeView',\n    component: () => import('../views/home.vue'),\n    children: [\n      // ***\n      {\n        path: '/billStyle', // 修改路径为 /bill\n        name: 'billStyle',\n        component: () =>\n            import ('../views/billStyle.vue')\n    },\n    {\n        path: '/customer', // 修改路径为 /customer\n        name: 'customerView',\n        component: () =>\n            import ('../views/customer.vue')\n    },\n    // ***\n      {\n        path: '/roles',\n        name: 'rolesView',\n        component: () => import('../views/roles.vue')\n      },\n      {\n        path: '/category',\n        name: 'categoryView',\n        component: () => import('../views/category.vue')\n      },\n      // {\n      //   path: '/billTypes',\n      //   name: 'billTypesView',\n      //   component: () => import('../views/billTypes.vue')\n      // },\n      // {\n      //   path: '/customers',\n      //   name: 'customersView',\n      //   component: () => import('../views/customers.vue')\n      // },\n      {\n        path: '/search',\n        name: 'searchView',\n        component: () => import('../views/search.vue')\n      },\n      {\n        path: '/create',\n        name: 'editView',\n        component: () => import('../views/edit.vue')\n      },\n      {\n        path: '/edit/:billno',\n        name: 'editView',\n        component: () => import('../views/edit.vue')\n      }\n    ]\n  }\n]\n\nconst router = new VueRouter({\n  routes\n})\n// 路由守卫\nrouter.beforeEach((to, from, next) => {\n  const rolesno = sessionStorage.getItem('rolesno')\n  const isValidPath = /^[a-zA-Z0-9/]*$/.test(to.path)\n\n  if (!isValidPath) {\n    // 如果路径不合法，重定向到默认页面\n    next('/')\n    return\n  }\n  if (to.path === '/') {\n    next()\n  } else {\n    if (rolesno == null) {\n      next('/')\n    } else {\n      next()\n    }\n  }\n  switch (rolesno) {\n    case '1':\n      if (to.path == '/roles') {\n        next('/search')\n      } else if (to.path == '/category') {\n        next('/search')\n      }\n      break;\n    case '2':\n      if (to.path == '/roles') {\n        next('/search')\n      } else if (to.path == '/category') {\n        next('/search')\n      } else if (to.path == '/edit') {\n        next('/search')\n      }else if(to.path == '/create'){\n        next('/search')\n      }\n      break;\n    case '3':\n      if (to.path == '/roles') {\n        next('/search')\n      } else if (to.path == '/category') {\n        next('/search')\n      } else if (to.path == '/edit') {\n        next('/search')\n      }else if(to.path == '/create'){\n        next('/search')\n      }\n      break;\n    case '4':\n\n      break;\n\n    default:\n      if (to.path === '/') {\n        next()\n      } else {\n        next('/')\n      }\n      break;\n  }\n})\n\nexport default router\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}