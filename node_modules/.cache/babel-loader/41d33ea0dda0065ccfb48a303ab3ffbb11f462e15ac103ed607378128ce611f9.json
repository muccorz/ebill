{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.css';\nimport 'flatpickr/dist/l10n/ja';\nexport default {\n  name: \"editView\",\n  data() {\n    return {\n      rewriteFlag: false,\n      remarkFlag: false,\n      //帳票詳細\n      bill: {\n        billType: '',\n        customer: '',\n        remark: '',\n        transactAmount: '',\n        transactionymd: '',\n        updateuserid: '',\n        updateymd: '',\n        imageUrl: '',\n        Logs: []\n      }\n    };\n  },\n  methods: {\n    create() {},\n    cancel() {\n      this.$router.push('/search');\n    },\n    handleAvatarSuccess() {\n      this.bill.imageUrl = \"https://solution.fielding.co.jp/application/files/6516/3910/2834/column-3.png\";\n    },\n    //サーバーからデータを取得する\n    loadCustomers() {\n      return [{\n        \"customer\": \"三全鲜食（北新泾店）\"\n      }, {\n        \"customer\": \"Hot honey 首尔炸鸡（仙霞路）\"\n      }];\n      // this.$http.get('/api/customer/list').then(res => {\n      //     if (res.date.code == 200) {\n      //         this.customer = res.data.data;\n      //     }\n      // });\n    },\n\n    loadBillStyles() {\n      return [{\n        \"billStyle\": \"胖仙女纸杯蛋糕（上海凌空店）\",\n        \"address\": \"上海市长宁区金钟路968号1幢18号楼一层商铺18-101\"\n      }, {\n        \"billStyle\": \"贡茶\",\n        \"address\": \"上海市长宁区金钟路633号\"\n      }];\n      // this.$http.get('/api/billStyle/list').then(res => {\n      //     if (res.date.code == 200) {\n      //         this.billStyle = res.data.data;\n      //     }\n      // });\n    },\n\n    //入力ボックスからデータを検索\n    customerQuerySearchAsync(queryString, cb) {\n      var customers = this.customers;\n      console.log(customers);\n      var results = queryString ? customers.filter(this.customersStateFilter(queryString)) : customers;\n      clearTimeout(this.timeout);\n      this.timeout = setTimeout(() => {\n        cb(results);\n      }, 3000 * Math.random());\n    },\n    billStyleQuerySearchAsync(queryString, cb) {\n      var billStyles = this.billStyles;\n      var results = queryString ? billStyles.filter(this.billStylesStateFilter(queryString)) : billStyles;\n      clearTimeout(this.timeout);\n      this.timeout = setTimeout(() => {\n        cb(results);\n      }, 3000 * Math.random());\n    },\n    //検索条件を作成する\n    customersStateFilter(queryString) {\n      return customers => {\n        return customers.customer.toLowerCase().indexOf(queryString.toLowerCase()) === 0;\n      };\n    },\n    billStylesStateFilter(queryString) {\n      return billStyles => {\n        return billStyles.billStyle.toLowerCase().indexOf(queryString.toLowerCase()) === 0;\n      };\n    },\n    //入力データをバンティングする\n    handleSelect(item) {\n      console.log(item);\n      if (item.customer != null) {\n        this.condition.customer = item.customer;\n      } else if (item.billType != null) {\n        this.condition.billType = item.billType;\n      } else if (item.updateuserid != null) {\n        this.condition.updateuserid = item.updateuserid;\n      }\n    },\n    init() {\n      let billno = this.$route.params.billno;\n      if (billno != undefined) {\n        //     this.bill.billno = billno;\n        //     this.$http.get('/api/bill/detail', {\n        //       params: {\n        //         billno: billno\n        //       }\n        //     }).then(res => {\n        //       this.bill = res.data;\n        //     })\n        //   }else{\n\n        //   } \n        this.bill.billType = '受け書';\n        this.bill.customer = 'CBO株式会社';\n        this.bill.remark = '当帳票の詳細を表示する';\n        this.bill.transactAmount = '￥99999.00';\n        this.bill.transactionymd = '2023/11/24';\n        this.bill.updateuserid = 'admin';\n        this.bill.updateymd = '2023/11/24';\n        this.bill.imageUrl = \"https://solution.fielding.co.jp/application/files/6516/3910/2834/column-3.png\";\n        this.rewriteFlag = true;\n      }\n    }\n  },\n  watch: {\n    $route() {\n      this.init();\n    }\n  },\n  mounted() {\n    flatpickr(this.$refs.datepickerInput, {\n      dateFormat: 'Y/m/d',\n      locale: 'ja',\n      firstDayOfWeek: '0'\n    });\n    this.customers = this.loadCustomers();\n    this.billStyles = this.loadBillStyles();\n  },\n  created() {\n    this.init();\n  }\n};","map":{"version":3,"names":["flatpickr","name","data","rewriteFlag","remarkFlag","bill","billType","customer","remark","transactAmount","transactionymd","updateuserid","updateymd","imageUrl","Logs","methods","create","cancel","$router","push","handleAvatarSuccess","loadCustomers","loadBillStyles","customerQuerySearchAsync","queryString","cb","customers","console","log","results","filter","customersStateFilter","clearTimeout","timeout","setTimeout","Math","random","billStyleQuerySearchAsync","billStyles","billStylesStateFilter","toLowerCase","indexOf","billStyle","handleSelect","item","condition","init","billno","$route","params","undefined","watch","mounted","$refs","datepickerInput","dateFormat","locale","firstDayOfWeek","created"],"sources":["src/views/edit.vue"],"sourcesContent":["<template lang=\"\">\r\n    <div>\r\n        <div style=\"margin: 30px 100px; \" class=\"d-flex\">\r\n            <div style=\"width: 44%;\">\r\n                <el-form ref=\"form\" :model=\"bill\" label-width=\"120px\">\r\n                    <el-form-item label=\"帳票No\" v-if=\"rewriteFlag\">\r\n                        <span style=\"font-size: 16px;\">{{bill.billno}}</span>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"取引年月日\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n                        <input type=\"text\" ref=\"datepickerInput\" v-model=\"bill.transactionymd\" class=\"el-input__inner\" style=\"width: 85%; \"\r\n                            placeholder=\"タッチで選択してください\">\r\n                    </el-form-item>\r\n                    <el-form-item label=\"取引金額\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n                        <el-input v-model=\"bill.transactAmount\" style=\"width: 85%;\" placeholder=\"￥\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"取引先\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n                        <el-autocomplete v-model=\"bill.customer\" :fetch-suggestions=\"customerQuerySearchAsync\"\r\n                        style=\"width: 85%;\" placeholder=\"入力又は選択\" @select=\"handleSelect\" value-key=\"customer\"></el-autocomplete>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"帳票種類\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n                        <el-autocomplete v-model=\"bill.billType\" :fetch-suggestions=\"billStyleQuerySearchAsync\"\r\n                        style=\"width: 85%;\" placeholder=\"入力又は選択\" @select=\"handleSelect\" value-key=\"billStyle\"></el-autocomplete>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"訂正備考\" :disable=\"remarkFlag\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n                        <el-input type=\"textarea\" :rows=\"3\" v-model=\"bill.remark\" style=\"width: 85%;\"\r\n                            placeholder=\"訂正の時のみ入力\"></el-input>\r\n                    </el-form-item>\r\n                </el-form>\r\n                <el-button size=\"medium\" type=\"primary\" @click=\"create\">新 規</el-button>\r\n                <el-button size=\"medium\" type=\"warning\" @click=\"cancel\">キャンセル</el-button>\r\n            </div>\r\n            <el-upload class=\"avatar-uploader\" action=\"http://127.0.0.1:8081\" :show-file-list=\"false\"\r\n                :on-error=\"handleAvatarSuccess\">\r\n                <embed v-if=\"bill.imageUrl\" :src=\"bill.imageUrl\" type=\"application/pdf\" width=\"48%\" height=\"85%\"\r\n                    style=\"position: absolute; top: 13%; left: 52%;\">\r\n                <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n            </el-upload>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import flatpickr from 'flatpickr';\r\n    import 'flatpickr/dist/flatpickr.css';\r\n    import 'flatpickr/dist/l10n/ja';\r\n    export default {\r\n        name: \"editView\",\r\n        data() {\r\n            return {\r\n                rewriteFlag: false,\r\n                remarkFlag: false,\r\n                //帳票詳細\r\n                bill: {\r\n                    billType: '',\r\n                    customer: '',\r\n                    remark: '',\r\n                    transactAmount: '',\r\n                    transactionymd: '',\r\n                    updateuserid: '',\r\n                    updateymd: '',\r\n                    imageUrl: '',\r\n                    Logs: [],\r\n                },\r\n            }\r\n        },\r\n\r\n        methods: {\r\n            create() {\r\n\r\n            },\r\n            cancel() {\r\n                this.$router.push('/search');\r\n            },\r\n            handleAvatarSuccess() {\r\n                this.bill.imageUrl = \"https://solution.fielding.co.jp/application/files/6516/3910/2834/column-3.png\";\r\n            },\r\n\r\n            //サーバーからデータを取得する\r\n            loadCustomers() {\r\n                return [\r\n                    { \"customer\": \"三全鲜食（北新泾店）\" },\r\n                    { \"customer\": \"Hot honey 首尔炸鸡（仙霞路）\" }\r\n                ];\r\n                // this.$http.get('/api/customer/list').then(res => {\r\n                //     if (res.date.code == 200) {\r\n                //         this.customer = res.data.data;\r\n                //     }\r\n                // });\r\n            },\r\n            loadBillStyles() {\r\n                return [\r\n                    { \"billStyle\": \"胖仙女纸杯蛋糕（上海凌空店）\", \"address\": \"上海市长宁区金钟路968号1幢18号楼一层商铺18-101\" },\r\n                    { \"billStyle\": \"贡茶\", \"address\": \"上海市长宁区金钟路633号\" },\r\n                ];\r\n                // this.$http.get('/api/billStyle/list').then(res => {\r\n                //     if (res.date.code == 200) {\r\n                //         this.billStyle = res.data.data;\r\n                //     }\r\n                // });\r\n            },\r\n            //入力ボックスからデータを検索\r\n            customerQuerySearchAsync(queryString, cb) {\r\n                var customers = this.customers;\r\n                console.log(customers);\r\n                var results = queryString ? customers.filter(this.customersStateFilter(queryString)) : customers;\r\n                clearTimeout(this.timeout);\r\n                this.timeout = setTimeout(() => {\r\n                    cb(results);\r\n                }, 3000 * Math.random());\r\n            },\r\n            billStyleQuerySearchAsync(queryString, cb) {\r\n                var billStyles = this.billStyles;\r\n                var results = queryString ? billStyles.filter(this.billStylesStateFilter(queryString)) : billStyles;\r\n                clearTimeout(this.timeout);\r\n                this.timeout = setTimeout(() => {\r\n                    cb(results);\r\n                }, 3000 * Math.random());\r\n            },\r\n            //検索条件を作成する\r\n            customersStateFilter(queryString) {\r\n                return (customers) => {\r\n                    return (customers.customer.toLowerCase().indexOf(queryString.toLowerCase()) === 0);\r\n                };\r\n            },\r\n            billStylesStateFilter(queryString) {\r\n                return (billStyles) => {\r\n                    return (billStyles.billStyle.toLowerCase().indexOf(queryString.toLowerCase()) === 0);\r\n                };\r\n            },\r\n            //入力データをバンティングする\r\n            handleSelect(item) {\r\n                console.log(item);\r\n                if (item.customer != null) {\r\n                    this.condition.customer = item.customer;\r\n                } else if (item.billType != null) {\r\n                    this.condition.billType = item.billType;\r\n                } else if (item.updateuserid != null) {\r\n                    this.condition.updateuserid = item.updateuserid;\r\n                }\r\n            },\r\n\r\n            init() {\r\n                let billno = this.$route.params.billno;\r\n                if (billno != undefined) {\r\n                    //     this.bill.billno = billno;\r\n                    //     this.$http.get('/api/bill/detail', {\r\n                    //       params: {\r\n                    //         billno: billno\r\n                    //       }\r\n                    //     }).then(res => {\r\n                    //       this.bill = res.data;\r\n                    //     })\r\n                    //   }else{\r\n\r\n                    //   } \r\n                    this.bill.billType = '受け書';\r\n                    this.bill.customer = 'CBO株式会社';\r\n                    this.bill.remark = '当帳票の詳細を表示する';\r\n                    this.bill.transactAmount = '￥99999.00';\r\n                    this.bill.transactionymd = '2023/11/24';\r\n                    this.bill.updateuserid = 'admin';\r\n                    this.bill.updateymd = '2023/11/24';\r\n                    this.bill.imageUrl = \"https://solution.fielding.co.jp/application/files/6516/3910/2834/column-3.png\";\r\n                    this.rewriteFlag = true;\r\n                }\r\n            }\r\n        },\r\n        watch: {\r\n            $route() {\r\n                this.init();\r\n            }\r\n        },\r\n        mounted() {\r\n            flatpickr(this.$refs.datepickerInput, {\r\n                dateFormat: 'Y/m/d',\r\n                locale: 'ja',\r\n                firstDayOfWeek: '0'\r\n            });\r\n            this.customers = this.loadCustomers();\r\n            this.billStyles = this.loadBillStyles();\r\n        },\r\n        created() {\r\n            this.init();\r\n        }\r\n    }\r\n</script>\r\n<style scoped>\r\n    .el-table :deep() .cell {\r\n        /* overflow: hidden; */\r\n        /* text-overflow: ellipsis; */\r\n        white-space: nowrap;\r\n\r\n    }\r\n\r\n    .block {\r\n        position: absolute;\r\n        bottom: 40px;\r\n        left: 47%;\r\n    }\r\n\r\n    .avatar-uploader .el-upload {\r\n        border: 1px dashed #d9d9d9;\r\n        border-radius: 6px;\r\n        cursor: pointer;\r\n        position: relative;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .avatar-uploader .el-upload:hover {\r\n        border-color: #409EFF;\r\n    }\r\n\r\n    .avatar-uploader-icon {\r\n        font-size: 28px;\r\n        color: #8c939d;\r\n        width: 178px;\r\n        height: 178px;\r\n        line-height: 178px;\r\n        text-align: center;\r\n    }\r\n\r\n    .avatar {\r\n        width: 178px;\r\n        height: 178px;\r\n        display: block;\r\n    }\r\n\r\n    .el-button {\r\n        margin: 5px;\r\n    }\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}