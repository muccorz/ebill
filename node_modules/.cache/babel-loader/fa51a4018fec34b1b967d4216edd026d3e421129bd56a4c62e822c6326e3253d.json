{"ast":null,"code":"export default {\n  name: 'rolesView',\n  data() {\n    return {\n      CreateUserVisible: false,\n      editUserVisible: false,\n      //ユーザー新規フォーム\n      user: {\n        userid: '',\n        username: '',\n        password: '',\n        rolesno: ''\n      },\n      formLabelWidth: '100px',\n      //サーバーから取得したユーザーデータ\n      users: [{\n        userno: '0001',\n        username: '田代 太郎',\n        rolesno: '1'\n      }, {\n        userno: '0002',\n        username: '毛賀 次郎',\n        rolesno: '2'\n      }, {\n        userno: '0003',\n        username: '埼玉 花子',\n        rolesno: '3'\n      }, {\n        userno: '0004',\n        username: '山田 三郎',\n        rolesno: '4'\n      }],\n      flag1: false,\n      flag2: false,\n      flag3: false,\n      flag4: false\n    };\n  },\n  computed: {\n    canLogin() {\n      return !this.flag1 && !this.flag2 && !this.flag3 && !this.flag4;\n    }\n  },\n  created() {\n    // this.init()\n  },\n  methods: {\n    // ユーザー編集\n    editUserbt(user) {\n      this.editUserVisible = true, this.user.userid = user.userid, this.user.username = user.username, this.user.rolesno = user.rolesno;\n    },\n    // ユーザー削除\n    deleteUser(user) {\n      this.$http.post(\"/user/deleteUser/\" + user.id).then(res => {\n        if (res.data.code == 200) {\n          this.$message({\n            message: '删除成功',\n            type: 'success'\n          });\n          this.init();\n        }\n      });\n    },\n    // ユーザー新規\n    createUser() {\n      // this.$http\n      //     .post(\"/user/createUser\", this.user)\n      //     .then(res => {\n      //         if (res.data.code == 200) {\n      //             this.CreateUserVisible = false;\n      //             this.$message({\n      //                 message: 'ユーザー新規成功',\n      //                 type: 'success'\n      //             });\n      //             this.init();\n      //         }\n      //     })\n      this.CreateUserVisible = false;\n    },\n    // ユーザー権限のフォーマット\n    userFormatter(row) {\n      if (row.rolesno == 1) {\n        return '操作者';\n      } else if (row.rolesno == 2) {\n        return '閲覧者';\n      } else if (row.rolesno == 3) {\n        return '管理者';\n      } else if (row.rolesno == 4) {\n        return 'システム管理者';\n      }\n    },\n    // ユーザー名のバリデーション\n    handleName() {\n      if (this.user.username == '') {\n        this.flag1 = true;\n      } else {\n        this.flag1 = false;\n      }\n      if (this.user.username.length != 0 && !/^[0-9]+$/.test(this.user.username)) {\n        this.flag3 = true;\n      } else {\n        this.flag3 = false;\n      }\n    },\n    // パスワードのバリデーション\n    handlePassword() {\n      if (this.user.password == '') {\n        this.flag2 = true;\n      } else {\n        this.flag2 = false;\n      }\n    },\n    //ユーザー一覧取得、初期化クリア\n    init() {\n      this.$http.post(\"/user/getUsers\").then(res => {\n        if (res.data.code == 200) {\n          this.users = res.data.data;\n        }\n      });\n      this.userInit();\n    },\n    userInit() {\n      this.user.userid = '', this.user.username = '', this.user.password = '', this.user.rolesno = '';\n    }\n  }\n};","map":{"version":3,"names":["name","data","CreateUserVisible","editUserVisible","user","userid","username","password","rolesno","formLabelWidth","users","userno","flag1","flag2","flag3","flag4","computed","canLogin","created","methods","editUserbt","deleteUser","$http","post","id","then","res","code","$message","message","type","init","createUser","userFormatter","row","handleName","length","test","handlePassword","userInit"],"sources":["src/views/roles.vue"],"sourcesContent":["<template>\r\n    <div style=\"text-align: left;\">\r\n        <div class=\"h4\" style=\"font-weight: 700;text-align:left\">権限管理</div>\r\n        <el-button type=\"primary\" class=\"mt-2 el-icon-edit\" @click=\"CreateUserVisible= true\">ユーザー新規</el-button>\r\n        <!-- ユーザー新規ダイアログ -->\r\n        <el-dialog title=\"ユーザー新規\" :visible.sync=\"CreateUserVisible\" :close-on-click-modal=\"false\" @closed=\"userInit\">\r\n            <el-form :model=\"user\">\r\n                <el-form-item label=\"ユーザーID\">\r\n                    <span class=\"text-danger\" style=\"font-size: 12px;\" v-if=\"flag1\">ユーザーIDを入力してください</span>\r\n                    <span class=\"text-danger\" style=\"font-size: 12px;\" v-if=\"flag3\">ユーザーIDは数字のみ</span>\r\n                    <el-input v-model=\"user.userid\" autocomplete=\"off\" placeholder=\"ユーザーIDを入力してください\"　 @blur=\"handUserid></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"ユーザー名\">\r\n                    <span class=\"text-danger\" style=\"font-size: 12px;\" v-if=\"flag4\">ユーザー名を入力してください</span>\r\n                    <el-input v-model=\"user.username\" placeholder=\"ユーザー名を入力してください\" @blur=\"handleUsername\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"パスワード\">\r\n                    <span class=\"text-danger\" style=\"font-size: 12px;\" v-if=\"flag2\">パスワードを入力してください</span>\r\n                    <el-input v-model=\"user.password\" placeholder=\"パスワードを入力してください\" show-password\r\n                        @blur=\"handlePassword\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"ユーザー権限\" :label-width=\"formLabelWidth\">\r\n                    <el-select v-model=\"user.rolesno\" placeholder=\"権限種類\">\r\n                        <el-option label=\"操作者\" value=\"1\"></el-option>\r\n                        <el-option label=\"閲覧者\" value=\"2\"></el-option>\r\n                        <el-option label=\"管理者\" value=\"3\"></el-option>\r\n                        <el-option label=\"システム管理者\" value=\"4\"></el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"CreateUserVisible = false\">キャンセル</el-button>\r\n                <el-button type=\"primary\" @click=\"createUser\" :disabled=\"!canLogin\">追 加</el-button>\r\n            </div>\r\n        </el-dialog>\r\n\r\n        <el-table :data=\"users\" style=\"width: 100%\">\r\n            <el-table-column prop=\"userno\" label=\"ユーザー番号\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"username\" label=\"ユーザー名\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"rolesno\" label=\"権限\" :formatter=\"userFormatter\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"address\" label=\"操作\">\r\n                <template slot-scope=\"scope\">\r\n                    <button type=\"button\" class=\"el-button el-button--primary el-button--small\"\r\n                        @click=\"editUserbt(scope.row)\">編集</button>\r\n                    <!-- ユーザー編集ダイアログ -->\r\n                    <!-- <el-dialog title=\"ユーザー新規\" :visible.sync=\"editUserVisible\" :close-on-click-modal=\"false\"\r\n                        @closed=\"userInit\">\r\n                        <el-form :model=\"user\">\r\n                            <el-form-item label=\"ユーザーID\">\r\n                                <span class=\"text-danger\" style=\"font-size: 12px;\" v-if=\"flag1\">ユーザーIDを入力してください</span>\r\n                                <span class=\"text-danger\" style=\"font-size: 12px;\" v-if=\"flag3\">ユーザーIDは数字のみ</span>\r\n                                <el-input v-model=\"user.userid\" autocomplete=\"off\"\r\n                                    placeholder=\"ユーザーIDを入力してください\"></el-input>\r\n                            </el-form-item>\r\n                            <el-form-item label=\"ユーザー名\">\r\n                                <span class=\"text-danger\" style=\"font-size: 12px;\" v-if=\"flag4\">ユーザー名を入力してください</span>\r\n                                <el-input v-model=\"user.username\" placeholder=\"ユーザーIDを入力してください\"\r\n                                    @blur=\"handleName\"></el-input>\r\n                            </el-form-item>\r\n                            <el-form-item label=\"パスワード\">\r\n                                <el-input v-model=\"user.password\" placeholder=\"パスワードを編集したい方のみ入力\" show-password\r\n                                    @blur=\"handlePassword\"></el-input>\r\n                            </el-form-item>\r\n                            <el-form-item label=\"ユーザー権限\" :label-width=\"formLabelWidth\">\r\n                                <el-select v-model=\"user.rolesno\" placeholder=\"権限種類\">\r\n                                    <el-option label=\"操作者\" value=\"1\"></el-option>\r\n                                    <el-option label=\"閲覧者\" value=\"2\"></el-option>\r\n                                    <el-option label=\"管理者\" value=\"3\"></el-option>\r\n                                    <el-option label=\"システム管理者\" value=\"4\"></el-option>\r\n                                </el-select>\r\n                            </el-form-item>\r\n                        </el-form>\r\n                        <div slot=\"footer\" class=\"dialog-footer\">\r\n                            <el-button @click=\"editUserVisible = false\">キャンセル</el-button>\r\n                            <el-button type=\"primary\" @click=\"editUser\">完了</el-button>\r\n                        </div>\r\n                    </el-dialog> -->\r\n                    <button type=\"button\" class=\"el-button el-button--danger el-button--small\"\r\n                        @click=\"deleteUser(scope.row)\">削除</button>\r\n                </template>\r\n\r\n            </el-table-column>\r\n        </el-table>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: 'rolesView',\r\n        data() {\r\n            return {\r\n                CreateUserVisible: false,\r\n                editUserVisible: false,\r\n                //ユーザー新規フォーム\r\n                user: {\r\n                    userid: '',\r\n                    username: '',\r\n                    password: '',\r\n                    rolesno: ''\r\n                },\r\n                formLabelWidth: '100px',\r\n                //サーバーから取得したユーザーデータ\r\n                users: [{\r\n                    userno: '0001',\r\n                    username: '田代 太郎',\r\n                    rolesno: '1'\r\n                }, {\r\n                    userno: '0002',\r\n                    username: '毛賀 次郎',\r\n                    rolesno: '2'\r\n                }, {\r\n                    userno: '0003',\r\n                    username: '埼玉 花子',\r\n                    rolesno: '3'\r\n                }, {\r\n                    userno: '0004',\r\n                    username: '山田 三郎',\r\n                    rolesno: '4'\r\n                }],\r\n                flag1: false,\r\n                flag2: false,\r\n                flag3: false,\r\n                flag4: false,\r\n            }\r\n        },\r\n        computed: {\r\n            canLogin() {\r\n                return !this.flag1 && !this.flag2 && !this.flag3 && !this.flag4;\r\n            }\r\n        },\r\n        created() {\r\n            // this.init()\r\n        },\r\n        methods: {\r\n            // ユーザー編集\r\n            editUserbt(user) {\r\n                this.editUserVisible = true,\r\n                    this.user.userid = user.userid,\r\n                    this.user.username = user.username,\r\n                    this.user.rolesno = user.rolesno\r\n            },\r\n            // ユーザー削除\r\n            deleteUser(user) {\r\n                this.$http\r\n                    .post(\"/user/deleteUser/\" + user.id)\r\n                    .then(res => {\r\n                        if (res.data.code == 200) {\r\n                            this.$message({\r\n                                message: '删除成功',\r\n                                type: 'success'\r\n                            });\r\n                            this.init()\r\n                        }\r\n                    })\r\n            },\r\n            // ユーザー新規\r\n            createUser() {\r\n                // this.$http\r\n                //     .post(\"/user/createUser\", this.user)\r\n                //     .then(res => {\r\n                //         if (res.data.code == 200) {\r\n                //             this.CreateUserVisible = false;\r\n                //             this.$message({\r\n                //                 message: 'ユーザー新規成功',\r\n                //                 type: 'success'\r\n                //             });\r\n                //             this.init();\r\n                //         }\r\n                //     })\r\n                this.CreateUserVisible = false;\r\n            },\r\n            // ユーザー権限のフォーマット\r\n            userFormatter(row) {\r\n                if (row.rolesno == 1) {\r\n                    return '操作者'\r\n                } else if (row.rolesno == 2) {\r\n                    return '閲覧者'\r\n                } else if (row.rolesno == 3) {\r\n                    return '管理者'\r\n                } else if (row.rolesno == 4) {\r\n                    return 'システム管理者'\r\n                }\r\n            },\r\n            // ユーザー名のバリデーション\r\n            handleName() {\r\n                if (this.user.username == '') {\r\n                    this.flag1 = true\r\n                } else {\r\n                    this.flag1 = false\r\n                }\r\n                if (this.user.username.length != 0 && !/^[0-9]+$/.test(this.user.username)) {\r\n                    this.flag3 = true\r\n                } else {\r\n                    this.flag3 = false\r\n                }\r\n            },\r\n            // パスワードのバリデーション\r\n            handlePassword() {\r\n                if (this.user.password == '') {\r\n                    this.flag2 = true\r\n                } else {\r\n                    this.flag2 = false\r\n                }\r\n            },\r\n            //ユーザー一覧取得、初期化クリア\r\n            init() {\r\n                this.$http\r\n                    .post(\"/user/getUsers\")\r\n                    .then(res => {\r\n                        if (res.data.code == 200) {\r\n                            this.users = res.data.data\r\n                        }\r\n                    })\r\n                this.userInit();\r\n            },\r\n            userInit() {\r\n                this.user.userid = '',\r\n                    this.user.username = '',\r\n                    this.user.password = '',\r\n                    this.user.rolesno = ''\r\n            }\r\n        },\r\n    }\r\n</script>\r\n<style scoped>\r\n\r\n</style>"],"mappings":"AA0FA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,iBAAA;MACAC,eAAA;MACA;MACAC,IAAA;QACAC,MAAA;QACAC,QAAA;QACAC,QAAA;QACAC,OAAA;MACA;MACAC,cAAA;MACA;MACAC,KAAA;QACAC,MAAA;QACAL,QAAA;QACAE,OAAA;MACA;QACAG,MAAA;QACAL,QAAA;QACAE,OAAA;MACA;QACAG,MAAA;QACAL,QAAA;QACAE,OAAA;MACA;QACAG,MAAA;QACAL,QAAA;QACAE,OAAA;MACA;MACAI,KAAA;MACAC,KAAA;MACAC,KAAA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACAC,SAAA;MACA,aAAAL,KAAA,UAAAC,KAAA,UAAAC,KAAA,UAAAC,KAAA;IACA;EACA;EACAG,QAAA;IACA;EAAA,CACA;EACAC,OAAA;IACA;IACAC,WAAAhB,IAAA;MACA,KAAAD,eAAA,SACA,KAAAC,IAAA,CAAAC,MAAA,GAAAD,IAAA,CAAAC,MAAA,EACA,KAAAD,IAAA,CAAAE,QAAA,GAAAF,IAAA,CAAAE,QAAA,EACA,KAAAF,IAAA,CAAAI,OAAA,GAAAJ,IAAA,CAAAI,OAAA;IACA;IACA;IACAa,WAAAjB,IAAA;MACA,KAAAkB,KAAA,CACAC,IAAA,uBAAAnB,IAAA,CAAAoB,EAAA,EACAC,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAzB,IAAA,CAAA0B,IAAA;UACA,KAAAC,QAAA;YACAC,OAAA;YACAC,IAAA;UACA;UACA,KAAAC,IAAA;QACA;MACA;IACA;IACA;IACAC,WAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,KAAA9B,iBAAA;IACA;IACA;IACA+B,cAAAC,GAAA;MACA,IAAAA,GAAA,CAAA1B,OAAA;QACA;MACA,WAAA0B,GAAA,CAAA1B,OAAA;QACA;MACA,WAAA0B,GAAA,CAAA1B,OAAA;QACA;MACA,WAAA0B,GAAA,CAAA1B,OAAA;QACA;MACA;IACA;IACA;IACA2B,WAAA;MACA,SAAA/B,IAAA,CAAAE,QAAA;QACA,KAAAM,KAAA;MACA;QACA,KAAAA,KAAA;MACA;MACA,SAAAR,IAAA,CAAAE,QAAA,CAAA8B,MAAA,qBAAAC,IAAA,MAAAjC,IAAA,CAAAE,QAAA;QACA,KAAAQ,KAAA;MACA;QACA,KAAAA,KAAA;MACA;IACA;IACA;IACAwB,eAAA;MACA,SAAAlC,IAAA,CAAAG,QAAA;QACA,KAAAM,KAAA;MACA;QACA,KAAAA,KAAA;MACA;IACA;IACA;IACAkB,KAAA;MACA,KAAAT,KAAA,CACAC,IAAA,mBACAE,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAzB,IAAA,CAAA0B,IAAA;UACA,KAAAjB,KAAA,GAAAgB,GAAA,CAAAzB,IAAA,CAAAA,IAAA;QACA;MACA;MACA,KAAAsC,QAAA;IACA;IACAA,SAAA;MACA,KAAAnC,IAAA,CAAAC,MAAA,OACA,KAAAD,IAAA,CAAAE,QAAA,OACA,KAAAF,IAAA,CAAAG,QAAA,OACA,KAAAH,IAAA,CAAAI,OAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}