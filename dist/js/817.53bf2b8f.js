"use strict";(self["webpackChunkebill"]=self["webpackChunkebill"]||[]).push([[817],{1817:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var l=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"text-align":"left"}},[t("div",{staticClass:"h4",staticStyle:{"font-weight":"700","text-align":"left"}},[e._v("ユーザー管理")]),t("el-divider"),t("el-button",{staticClass:"mt-2 el-icon-edit",attrs:{type:"primary"},on:{click:function(t){e.CreateUserVisible=!0}}},[e._v("ユーザー新規")]),t("el-dialog",{attrs:{title:"ユーザー新規",visible:e.CreateUserVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.CreateUserVisible=t},closed:e.userInit}},[t("el-form",{attrs:{model:e.user}},[t("el-form-item",{attrs:{label:"ユーザーID"}},[e.flag1?t("span",{staticClass:"text-danger",staticStyle:{"font-size":"12px"}},[e._v("ユーザーIDを入力してください")]):e._e(),e.flag3?t("span",{staticClass:"text-danger",staticStyle:{"font-size":"12px"}},[e._v("ユーザーIDは数字のみ")]):e._e(),t("el-input",{attrs:{autocomplete:"off",placeholder:"ユーザーIDを入力してください"},on:{blur:e.handUserid},model:{value:e.user.userid,callback:function(t){e.$set(e.user,"userid",t)},expression:"user.userid"}})],1),t("el-form-item",{attrs:{label:"ユーザー名"}},[e.flag4?t("span",{staticClass:"text-danger",staticStyle:{"font-size":"12px"}},[e._v("ユーザー名を入力してください")]):e._e(),t("el-input",{attrs:{placeholder:"ユーザー名を入力してください"},on:{blur:e.handleUsername},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),t("el-form-item",{attrs:{label:"パスワード"}},[e.flag2?t("span",{staticClass:"text-danger",staticStyle:{"font-size":"12px"}},[e._v("パスワードを入力してください")]):e._e(),t("el-input",{attrs:{placeholder:"パスワードを入力してください","show-password":""},on:{blur:e.handlePassword},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),t("el-form-item",{attrs:{label:"ユーザー権限"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"権限種類を選択してください"},model:{value:e.user.rolesno,callback:function(t){e.$set(e.user,"rolesno",t)},expression:"user.rolesno"}},[t("el-option",{attrs:{label:"操作者",value:"1"}}),t("el-option",{attrs:{label:"閲覧者",value:"2"}}),t("el-option",{attrs:{label:"管理者",value:"3"}}),t("el-option",{attrs:{label:"システム管理者",value:"4"}})],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.CreateUserVisible=!1}}},[e._v("キャンセル")]),t("el-button",{attrs:{type:"primary",disabled:!e.canLogin},on:{click:e.createUser}},[e._v("追 加")])],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.users}},[t("el-table-column",{attrs:{prop:"userid",label:"ユーザー番号"}}),t("el-table-column",{attrs:{prop:"username",label:"ユーザー名"}}),t("el-table-column",{attrs:{prop:"rolesno",label:"権限",formatter:e.userFormatter}}),t("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("button",{staticClass:"el-button el-button--primary el-button--small",attrs:{type:"button"},on:{click:function(t){return e.editUserbt(s.row)}}},[e._v("編集")]),t("el-dialog",{attrs:{title:"ユーザー編集",visible:e.editUserVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editUserVisible=t},closed:e.userInit}},[t("el-form",{attrs:{model:e.user}},[t("el-form-item",{attrs:{label:"ユーザーID"}},[e.flag1?t("span",{staticClass:"text-danger",staticStyle:{"font-size":"12px"}},[e._v("ユーザーIDを入力してください")]):e._e(),e.flag3?t("span",{staticClass:"text-danger",staticStyle:{"font-size":"12px"}},[e._v("ユーザーIDは数字のみ")]):e._e(),t("el-input",{attrs:{autocomplete:"off",placeholder:"ユーザーIDを入力してください"},on:{blur:e.handUserid},model:{value:e.user.userid,callback:function(t){e.$set(e.user,"userid",t)},expression:"user.userid"}})],1),t("el-form-item",{attrs:{label:"ユーザー名"}},[e.flag4?t("span",{staticClass:"text-danger",staticStyle:{"font-size":"12px"}},[e._v("ユーザー名を入力してください")]):e._e(),t("el-input",{attrs:{placeholder:"ユーザー名を入力してください"},on:{blur:e.handleUsername},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),t("el-form-item",{attrs:{label:"パスワード"}},[t("el-input",{attrs:{placeholder:"パスワードを編集したい方のみ入力","show-password":""},on:{blur:e.handlePassword},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),t("el-form-item",{attrs:{label:"ユーザー権限"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"権限種類を選択してください"},model:{value:e.user.rolesno,callback:function(t){e.$set(e.user,"rolesno",t)},expression:"user.rolesno"}},[e._l(e.roles,(function(e){return t("el-option",{key:e.no,attrs:{label:e.roleName,value:e.no}})})),t("el-option",{key:"1",attrs:{label:"操作者",value:"1"}}),t("el-option",{key:"2",attrs:{label:"閲覧者",value:"2"}}),t("el-option",{key:"3",attrs:{label:"管理者",value:"3"}}),t("el-option",{key:"4",attrs:{label:"システム管理者",value:"4"}})],2)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editUserVisible=!1}}},[e._v("キャンセル")]),t("el-button",{attrs:{type:"primary",disabled:!e.canEdit},on:{click:e.editUser}},[e._v("完 了")])],1)],1),e._v("   "),t("button",{staticClass:"el-button el-button--danger el-button--small",attrs:{type:"button"},on:{click:function(t){return e.deleteUser(s.row)}}},[e._v("削除")])]}}])})],1)],1)},r=[],a={name:"rolesView",data(){return{CreateUserVisible:!1,editUserVisible:!1,user:{userid:"",username:"",password:"",rolesno:""},formLabelWidth:"100px",users:[],flag1:!1,flag2:!1,flag3:!1,flag4:!1,roles:[{no:1,roleName:"操作者"},{no:2,roleName:"閲覧者"},{no:3,roleName:"管理者"},{no:4,roleName:"システム管理者"}]}},computed:{canLogin(){return!this.flag1&&!this.flag2&&!this.flag3&&!this.flag4&&0!=this.user.userid.length&&0!=this.user.username.length&&0!=this.user.password.length&&0!=this.user.rolesno.length},canEdit(){return!this.flag1&&!this.flag3&&!this.flag4&&0!=this.user.userid.length&&0!=this.user.username.length&&0!=this.user.rolesno.length}},created(){this.init()},methods:{editUser(){this.$http.post("/user/editUser",this.user).then((e=>{200==e.data.code&&(this.editUserVisible=!1,this.$message({message:"ユーザー編集成功",type:"success"}),this.init())})),this.editUserVisible=!1},editUserbt(e){this.editUserVisible=!0,this.user.userid=e.userid,this.user.username=e.username,this.user.rolesno=e.rolesno},deleteUser(e){this.$confirm("これでユーザーは完全に削除されます，続きますが？","このユーザーを削除しますか？",{confirmButtonText:"続く",cancelButtonText:"キャンセル",type:"warning"}).then((()=>{this.$http.get("/user/deleteUser/"+e.userid).then((e=>{200==e.data.code&&(this.$message({message:"削除成功",type:"success"}),this.init())}))}))},createUser(){this.$http.post("/user/createUser",this.user).then((e=>{200==e.data.code&&(this.CreateUserVisible=!1,this.$message({message:"ユーザー新規成功",type:"success"}),this.init())})),this.CreateUserVisible=!1},userFormatter(e){return 1==e.rolesno?"操作者":2==e.rolesno?"閲覧者":3==e.rolesno?"管理者":4==e.rolesno?"システム管理者":void 0},handUserid(){""==this.user.userid?this.flag1=!0:this.flag1=!1,0==this.user.userid.length||/^[0-9]+$/.test(this.user.userid)?this.flag3=!1:this.flag3=!0},handleUsername(){""==this.user.username?this.flag4=!0:this.flag4=!1},handlePassword(){""==this.user.password?this.flag2=!0:this.flag2=!1},init(){this.$http.get("/user/getUsers").then((e=>{200==e.data.code&&(this.users=e.data.data)})),this.userInit()},userInit(){this.user.userid="",this.user.username="",this.user.password="",this.user.rolesno="",this.flag1=!1,this.flag2=!1,this.flag3=!1,this.flag4=!1}}},i=a,o=s(1001),n=(0,o.Z)(i,l,r,!1,null,"40dc3c4a",null),u=n.exports}}]);
//# sourceMappingURL=817.53bf2b8f.js.map