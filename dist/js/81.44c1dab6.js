"use strict";(self["webpackChunkebill"]=self["webpackChunkebill"]||[]).push([[81],{81:function(t,l,e){e.r(l),e.d(l,{default:function(){return m}});var i=function(){var t=this,l=t._self._c;return l("div",[l("div",{staticClass:"d-flex",staticStyle:{margin:"30px 100px"}},[l("div",{staticStyle:{width:"44%"}},[l("el-form",{ref:"form",attrs:{model:t.bill,"label-width":"120px"}},[t.rewriteFlag?l("el-form-item",{attrs:{label:"帳票No"}},[l("span",{staticStyle:{"font-size":"16px"}},[t._v(t._s(t.bill.billno))])]):t._e(),l("el-form-item",{attrs:{label:"取引年月日"}},[t._v("       "),l("input",{directives:[{name:"model",rawName:"v-model",value:t.bill.transactionymd,expression:"bill.transactionymd"}],ref:"datepickerInput",staticClass:"el-input__inner",staticStyle:{width:"85%"},attrs:{type:"text",placeholder:"入力或いは選択してください"},domProps:{value:t.bill.transactionymd},on:{input:function(l){l.target.composing||t.$set(t.bill,"transactionymd",l.target.value)}}})]),l("el-form-item",{attrs:{label:"取引金額"}},[t._v("       "),l("el-input",{staticStyle:{width:"85%"},attrs:{placeholder:"￥"},on:{blur:t.checkAmountFrom},model:{value:t.bill.transactionAmount,callback:function(l){t.$set(t.bill,"transactionAmount",l)},expression:"bill.transactionAmount"}})],1),l("el-form-item",{attrs:{label:"取引先"}},[t._v("       "),l("el-select",{staticStyle:{width:"85%"},attrs:{filterable:"",placeholder:"入力又は選択"},model:{value:t.bill.customerno,callback:function(l){t.$set(t.bill,"customerno",l)},expression:"bill.customerno"}},t._l(t.customers,(function(t){return l("el-option",{key:t.customerno,attrs:{label:t.customer,value:t.customerno}})})),1)],1),l("el-form-item",{attrs:{label:"帳票種類"}},[t._v("       "),l("el-select",{staticStyle:{width:"85%"},attrs:{filterable:"",placeholder:"入力又は選択"},model:{value:t.bill.billTypeno,callback:function(l){t.$set(t.bill,"billTypeno",l)},expression:"bill.billTypeno"}},t._l(t.billTypes,(function(t){return l("el-option",{key:t.billTypeno,attrs:{label:t.billType,value:t.billTypeno}})})),1)],1),l("el-form-item",{attrs:{label:"備考"}},[t._v("       "),l("el-input",{staticStyle:{width:"85%"},attrs:{type:"textarea",rows:3,placeholder:"訂正の時必ず入力してください"},model:{value:t.bill.remark,callback:function(l){t.$set(t.bill,"remark",l)},expression:"bill.remark"}})],1)],1),l("el-button",{attrs:{size:"medium",type:"primary",disabled:t.setCreateBt},on:{click:t.create}},[t._v(t._s(t.createBtText))]),l("el-button",{attrs:{size:"medium",type:"warning"},on:{click:t.cancel}},[t._v("キャンセル")])],1),l("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://localhost:8082/bill/updateFile","show-file-list":!1,"on-success":t.handleAvatarSuccess}},[l("el-button",{attrs:{size:"small",type:"primary"}},[t._v("アップロードファイル")]),t.bill.imageUrl?l("embed",{staticStyle:{position:"absolute",top:"17%",left:"51%"},attrs:{src:t.bill.imageUrl,type:"application/pdf",width:"48%",height:"83%"}}):t._e()],1)],1)])},a=[],s=(e(7658),e(7516)),r=(e(51),{name:"editView",data(){return{createBtText:"作 成",rewriteFlag:!1,remarkFlag:!0,createBt:!0,billTypes:[],customers:[],bill:{billno:"",updateuserId:"",billTypeno:"",customerno:"",remark:"",transactionAmount:"",transactionymd:"",imageUrl:""}}},computed:{setCreateBt(){return void 0!=this.bill.billno?""==this.bill.billTypeno||""==this.bill.customerno||""==this.bill.transactionAmount||""==this.bill.transactionymd||""==this.bill.imageUrl||""==this.bill.remark:""==this.bill.billTypeno||""==this.bill.customerno||""==this.bill.transactionAmount||""==this.bill.transactionymd||""==this.bill.imageUrl}},methods:{create(){this.bill.updateuserId=sessionStorage.getItem("userid"),void 0!=this.bill.billno?this.$http.post("/bill/editBill",this.bill).then((t=>{200==t.data.code&&(this.$message({type:"success",message:"訂正成功"}),this.$router.push("/search"))})):this.$http.post("/bill/createBill",this.bill).then((t=>{200==t.data.code&&(this.$message({type:"success",message:"作成成功"}),this.$router.push("/search"))}))},cancel(){this.$router.push("/search")},handleAvatarSuccess(t){console.log(t),this.bill.imageUrl="https://solution.fielding.co.jp/application/files/6516/3910/2834/column-3.png"},checkAmountFrom(){/^-?\d+$/.test(this.bill.transactionAmount)||""==this.bill.transactionAmount||(this.$message({type:"error",message:"整数のみ入力"}),this.bill.transactionAmount="")},loadCustomers(){this.$http.get("/category/getCustomers").then((t=>{200==t.data.code&&(this.customers=t.data.data)}))},loadBillTypes(){this.$http.get("/category/getBillTypes").then((t=>{200==t.data.code&&(this.billTypes=t.data.data)}))},init(){this.bill.billno=this.$route.params.billno,void 0!=this.bill.billno?this.$http.get("/bill/getBillDetails/"+this.bill.billno).then((t=>{this.bill=t.data.data})):(this.bill.billTypeno="",this.bill.customerno="",this.bill.remark="",this.bill.transactionAmount="",this.bill.transactionymd="",this.bill.updateuserId="",this.bill.updateymd="",this.bill.imageUrl="",this.rewriteFlag=!1,this.remarkFlag=!0,this.createBtText="作 成")}},watch:{$route(){this.init()}},mounted(){(0,s.Z)(this.$refs.datepickerInput,{dateFormat:"Y/m/d",locale:"ja",firstDayOfWeek:"0",allowInput:"true",minDate:"1990/01/01",maxDate:"today"}),this.loadCustomers(),this.loadBillTypes()},created(){this.init()}}),o=r,n=e(1001),c=(0,n.Z)(o,i,a,!1,null,"23f6da9d",null),m=c.exports}}]);
//# sourceMappingURL=81.44c1dab6.js.map